<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GHOSTROOM | Anonymous Social</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root { --bg: #050505; --card: #121212; --accent: #ff2d55; --border: rgba(255, 255, 255, 0.08); }
        body { background-color: var(--bg); color: white; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; overflow: hidden; height: 100dvh; -webkit-tap-highlight-color: transparent; }
        .screen { display: none; height: 100%; flex-direction: column; animation: fadeIn 0.3s ease-out; }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 28px; transition: transform 0.2s; position: relative; overflow: hidden; }
        .card:active { transform: scale(0.98); }
        .msg-bubble { max-width: 85%; padding: 14px 18px; border-radius: 24px; font-size: 14px; position: relative; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .msg-ghost { filter: blur(12px); cursor: pointer; background: linear-gradient(45deg, #1a1a1a, #2a2a2a); }
        .msg-ghost.revealing { filter: blur(0); border: 1px solid var(--accent); }
        .msg-burned { opacity: 0.15; filter: grayscale(1) blur(2px); pointer-events: none; }
        .loading-shimmer { background: linear-gradient(90deg, #121212 25%, #1a1a1a 50%, #121212 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        nav { position: fixed; bottom: 0; left: 0; right: 0; height: 85px; background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(25px); border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding-bottom: 20px; z-index: 50; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; color: #444; gap: 4px; transition: 0.3s; cursor: pointer; }
        .nav-item.active { color: white; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .offline-banner { position: fixed; top: 0; left: 0; right: 0; background: #ff2d55; color: white; font-size: 10px; font-weight: 800; text-align: center; padding: 4px; z-index: 1000; display: none; text-transform: uppercase; letter-spacing: 2px; }
        .toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: white; color: black; padding: 10px 20px; border-radius: 50px; font-weight: 800; font-size: 10px; z-index: 200; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translate(-50%, 20px); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }
    </style>

    <script>
        window.changeScreen = (name) => {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(`screen-${name}`).classList.add('active');
        };
    </script>
</head>
<body>

    <div id="offline-msg" class="offline-banner">Connection Lost - Ghosting Offline...</div>

    <!-- HOME SCREEN -->
    <div id="screen-home" class="screen active p-6 overflow-y-auto pb-32 hide-scroll">
        <header class="mt-8 mb-10 flex justify-between items-start">
            <div>
                <h1 class="text-4xl font-extrabold tracking-tighter italic">GHOSTROOM</h1>
                <p class="text-white/30 text-[10px] mt-1 font-bold tracking-widest uppercase" id="user-id-display">Syncing...</p>
            </div>
            <div id="connection-dot" class="w-2 h-2 rounded-full bg-green-500 mt-4 shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
        </header>

        <div class="mb-10">
            <button id="btn-create-room" class="card w-full p-6 text-left disabled:opacity-50">
                <i data-lucide="box" class="text-purple-400 mb-3"></i>
                <h3 class="font-bold text-sm">Open a Void</h3>
                <p class="text-[10px] text-white/30 font-black uppercase tracking-wider">Create a new chat room</p>
                <div id="load-create" class="hidden absolute inset-0 loading-shimmer opacity-40"></div>
            </button>
        </div>

        <h4 class="text-[10px] font-black uppercase tracking-[0.3em] text-white/20 mb-4 px-2">Recent Frequency</h4>
        <div id="history-container" class="space-y-3"></div>
    </div>

    <!-- CHAT SCREEN -->
    <div id="screen-chat" class="screen">
        <header class="p-4 flex items-center justify-between border-b border-white/5 bg-black/50 backdrop-blur-lg">
            <button onclick="window.location.hash = ''" class="text-white/30 p-2"><i data-lucide="chevron-left"></i></button>
            <div class="text-center">
                <p class="text-[10px] font-black text-pink-500 uppercase tracking-[0.2em]" id="chat-title">Whisper Room</p>
                <p class="text-[9px] text-white/20 font-bold" id="chat-subtitle">#000000</p>
                <p class="text-[8px] text-white/20 font-bold mt-1 uppercase tracking-wider">Messages vanish after 24 hours</p>
            </div>
            <button id="btn-copy-link" class="p-2 bg-white/5 rounded-xl border border-white/10"><i data-lucide="share-2" size="16"></i></button>
        </header>
        <div id="prompt-container" class="p-4 text-center text-xs text-white/30"></div>
        <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 hide-scroll"></div>
        
        <div id="reply-preview" class="hidden px-4 py-3 bg-white/5 border-t border-white/10 flex justify-between items-center text-[10px] context-bar">
            <div class="border-l-2 border-pink-500 pl-3">
                <p class="text-white/40 uppercase font-black">Replying to</p>
                <p id="reply-text" class="text-white/80 italic truncate max-w-[200px]"></p>
            </div>
            <button id="btn-cancel-reply" class="p-2"><i data-lucide="x" size="14"></i></button>
        </div>

        <div id="edit-preview" class="hidden px-4 py-3 bg-white/5 border-t border-white/10 flex justify-between items-center text-[10px] context-bar">
            <div class="border-l-2 border-yellow-500 pl-3">
                <p class="text-white/40 uppercase font-black">Editing Message</p>
            </div>
            <button id="btn-cancel-edit" class="p-2"><i data-lucide="x" size="14"></i></button>
        </div>

        <div class="p-4 pb-8 bg-black">
            <div id="identity-menu" class="hidden mb-2 p-3 bg-white/5 rounded-2xl">
                <div class="text-[10px] font-bold uppercase text-white/30 mb-2">Choose Identity</div>
                <div class="flex gap-2">
                    <button id="identity-anon" class="flex-1 text-[10px] p-2 rounded-lg bg-white/10">Anonymous</button>
                    <button id="identity-id" class="flex-1 text-[10px] p-2 rounded-lg bg-white/5">User ID</button>
                    <button id="identity-custom-btn" class="flex-1 text-[10px] p-2 rounded-lg bg-white/5">Custom</button>
                </div>
                <input type="text" id="identity-custom-input" class="hidden w-full bg-transparent text-xs p-2 mt-2 border-b border-white/10" placeholder="Enter custom name...">
            </div>
            <form id="chat-form" class="flex items-end gap-2 p-2 bg-white/5 border border-white/10 rounded-[30px] focus-within:border-white/20" style="transition: transform 0.3s ease-in-out;">
                <button type="button" id="btn-identity" class="w-10 h-10 rounded-full flex items-center justify-center text-white/20 transition-colors">
                    <i data-lucide="user" size="18"></i>
                </button>
                <button type="button" id="btn-ghost" class="w-10 h-10 rounded-full flex items-center justify-center text-white/20 transition-colors">
                    <i data-lucide="ghost" size="18"></i>
                </button>
                <textarea id="chat-input" rows="1" class="flex-1 bg-transparent py-3 px-1 text-sm outline-none resize-none placeholder:text-white/10" placeholder="Type a message..."></textarea>
                <button type="submit" id="btn-chat-send" class="w-10 h-10 bg-white text-black rounded-full flex items-center justify-center disabled:opacity-50">
                    <i data-lucide="arrow-up" size="20"></i>
                </button>
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc, addDoc, onSnapshot, serverTimestamp, updateDoc, deleteDoc, query, orderBy, limit, getDoc, getDocs, where, writeBatch } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCEUDD0iB4iGFSDoC0a3wCXF8PT098Su3w",
            authDomain: "anonymous-messaging-f93c0.firebaseapp.com",
            projectId: "anonymous-messaging-f93c0"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'ghostroom-v3-prod';

        let user = null;
        let currentRoomId = null;
        let isGhostMode = false;
        let replyingTo = null;
        let editMessageId = null;
        let pendingImage = null;
        let isProcessing = false;
        let senderIdentity = 'anon';
        let customSenderName = '';

        const editPreview = document.getElementById('edit-preview');
        const btnCancelEdit = document.getElementById('btn-cancel-edit');
        const btnIdentity = document.getElementById('btn-identity');
        const identityMenu = document.getElementById('identity-menu');
        const identityAnon = document.getElementById('identity-anon');
        const identityId = document.getElementById('identity-id');
        const identityCustomBtn = document.getElementById('identity-custom-btn');
        const identityCustomInput = document.getElementById('identity-custom-input');
        const chatInput = document.getElementById('chat-input');
        const chatForm = document.getElementById('chat-form');

        lucide.createIcons();

        // UTILS
        const showToast = (msg) => {
            const t = document.createElement('div');
            t.className = 'toast';
            t.textContent = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 2500);
        };

        const sanitize = (str) => str.replace(/</g, "&lt;").replace(/>/g, "&gt;");

        // INTERNET MONITOR
        const updateOnlineStatus = () => {
            const isOnline = navigator.onLine;
            document.getElementById('offline-msg').style.display = isOnline ? 'none' : 'block';
            document.getElementById('connection-dot').className = `w-2 h-2 rounded-full mt-4 shadow-lg ${isOnline ? 'bg-green-500 shadow-green-500/50' : 'bg-red-500 shadow-red-500/50'}`;
        };
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        // AUTH
        onAuthStateChanged(auth, (u) => {
            if (u) {
                user = u;
                document.getElementById('user-id-display').textContent = `UID: ${u.uid.substring(0,6)}`;
                loadHistory();
                checkHash();
            } else {
                signInAnonymously(auth);
            }
        });

        const checkHash = () => {
            const hash = window.location.hash.slice(1);
            if (hash) {
                initChat(hash);
            } else {
                window.changeScreen('home');
            }
        };
        window.onhashchange = checkHash;

        // ROOM LOGIC
        const createRoom = async (type) => {
            if(!user || isProcessing) return;
            isProcessing = true;
            document.getElementById('load-create').classList.remove('hidden');

            try {
                const id = Math.random().toString(36).substring(2, 10);
                await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'rooms', id), { type: 'private', createdAt: serverTimestamp() }, { merge: true });
                await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'history', id), { roomId: id, type: 'private', timestamp: Date.now() });
                window.location.hash = id;
            } catch (e) { showToast("Signal Failed"); }
            
            isProcessing = false;
            document.getElementById('load-create').classList.add('hidden');
        };

        // CHAT ENGINE
        let unsubChat = null;
        window.initChat = async (roomId) => {
            currentRoomId = roomId;
            window.changeScreen('chat');

            // Add to history. The `loadHistory` function uses `onSnapshot`, so
            // this will automatically update the UI.
            if(user) {
                const roomDoc = await getDoc(doc(db, 'artifacts', appId, 'public', 'data', 'rooms', roomId));
                if (roomDoc.exists()) {
                    const roomType = roomDoc.data().type || 'private';
                    setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'history', roomId), { roomId: roomId, type: roomType, timestamp: Date.now() });
                }
            }
            document.getElementById('chat-subtitle').textContent = `#${roomId.toUpperCase()}`;
            const msgRef = collection(db, 'artifacts', appId, 'public', 'data', 'rooms', roomId, 'messages');

            // Auto-delete messages older than 24 hours
            const yesterday = new Date(Date.now() - 24 * 60 * 60 * 1000);
            const oldMessagesQuery = query(msgRef, where('createdAt', '<', yesterday));
            getDocs(oldMessagesQuery).then(snapshot => {
                const batch = writeBatch(db);
                snapshot.docs.forEach(doc => batch.delete(doc.ref));
                batch.commit();
            });

            const q = query(msgRef, orderBy('createdAt', 'asc'), limit(60));
            
            if (unsubChat) unsubChat();
            unsubChat = onSnapshot(q, (snap) => {
                const container = document.getElementById('chat-messages');
                container.innerHTML = '';
                snap.docs.forEach(docSnap => {
                    const m = { id: docSnap.id, ...docSnap.data() };
                    const isMe = m.sender === user.uid;
                    const isBurned = m.status === 'burned';
                    
                    const wrapper = document.createElement('div');
                    wrapper.className = `flex flex-col ${isMe ? 'items-end' : 'items-start'} w-full`;

                    let senderNameplate = '';
                    if (!isMe) {
                        if (m.identity === 'id') {
                            senderNameplate = `<div class="text-[9px] text-white/30 font-bold mb-1 px-3">${m.sender.substring(0,6)}</div>`;
                        } else if (m.identity === 'custom' && m.customName) {
                            senderNameplate = `<div class="text-[9px] text-white/30 font-bold mb-1 px-3">${sanitize(m.customName)}</div>`;
                        }
                    }
                    
                    wrapper.innerHTML = `
                        ${senderNameplate}
                        ${m.replyTo ? `<div class="text-[9px] text-white/20 mb-1 px-3">â†³ ${sanitize(m.replyTo.text).substring(0,15)}...</div>` : ''}
                        <div class="msg-bubble ${isMe ? 'bg-pink-600' : 'bg-white/5 border border-white/10'} 
                             ${m.isGhost && !isBurned ? 'msg-ghost' : ''} ${isBurned ? 'msg-burned' : ''}" 
                             id="msg-${m.id}">
                            ${isBurned ? 'VANISHED' : sanitize(m.text)}
                            ${m.editedAt ? `<span class="text-[9px] text-white/50 pl-2"> (edited)</span>` : ''}
                        </div>`;

                    const bubble = wrapper.querySelector('.msg-bubble');

                    // Double tap to edit
                    let lastTap = 0;
                    bubble.addEventListener('touchend', (e) => {
                        const currentTime = new Date().getTime();
                        const tapLength = currentTime - lastTap;
                        if (tapLength < 300 && tapLength > 0) {
                            if(isMe) setEdit(m);
                            e.preventDefault();
                        }
                        lastTap = currentTime;
                    });


                    // Swipe to Reply
                    let startX = 0;
                    wrapper.addEventListener('touchstart', e => startX = e.touches[0].clientX);
                    wrapper.addEventListener('touchend', e => {
                        if (e.changedTouches[0].clientX - startX > 80) {
                            if (window.navigator.vibrate) window.navigator.vibrate(5);
                            setReply(m);
                        }
                    });

                    wrapper.onclick = () => {
                        if (m.isGhost && !isBurned) revealGhost(m.id);
                    };

                    container.appendChild(wrapper);
                });
                container.scrollTop = container.scrollHeight;
            });
        };

        const revealGhost = async (id) => {
            const el = document.getElementById(`msg-${id}`);
            if(el.classList.contains('revealing')) return;
            el.classList.add('revealing');
            setTimeout(async () => {
                await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'rooms', currentRoomId, 'messages', id), { status: 'burned' });
            }, 5000);
        };

        const setReply = (m) => {
            replyingTo = m;
            document.getElementById('reply-text').textContent = m.text;
            document.getElementById('reply-preview').classList.remove('hidden');
            document.getElementById('chat-input').focus();
            slideContextBars();
        };

        // EVENT BINDINGS
        document.getElementById('btn-create-room').onclick = () => createRoom('private');

        document.getElementById('btn-copy-link').onclick = () => {
            navigator.clipboard.writeText(window.location.href);
            showToast("LINK COPIED TO CLIPBOARD");
        };
        
        document.getElementById('btn-ghost').onclick = () => {
            isGhostMode = !isGhostMode;
            document.getElementById('btn-ghost').classList.toggle('text-pink-500', isGhostMode);
            document.getElementById('btn-ghost').classList.toggle('text-white/20', !isGhostMode);
        };

        document.getElementById('chat-form').onsubmit = async (e) => {
            e.preventDefault();
            const input = document.getElementById('chat-input');
            if(!input.value.trim() || isProcessing) return;
            isProcessing = true;
            document.getElementById('btn-chat-send').disabled = true;

            if (editMessageId) {
                const msgRef = doc(db, 'artifacts', appId, 'public', 'data', 'rooms', currentRoomId, 'messages', editMessageId);
                await updateDoc(msgRef, { text: input.value, editedAt: serverTimestamp() });
            } else {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'rooms', currentRoomId, 'messages'), {
                    text: input.value, sender: user.uid, createdAt: serverTimestamp(),
                    isGhost: isGhostMode, status: 'active',
                    replyTo: replyingTo ? { text: replyingTo.text } : null,
                    identity: senderIdentity,
                    customName: customSenderName
                });
            }

            input.value = '';
            input.style.height = 'auto';
            replyingTo = null;
            document.getElementById('reply-preview').classList.add('hidden');
            cancelEdit();
            isProcessing = false;
            document.getElementById('btn-chat-send').disabled = false;
        };

        document.getElementById('chat-input').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });

        const loadHistory = () => {
            const histRef = collection(db, 'artifacts', appId, 'users', user.uid, 'history');
            onSnapshot(histRef, (snap) => {
                const container = document.getElementById('history-container');
                container.innerHTML = '';
                snap.docs.sort((a,b) => b.data().timestamp - a.data().timestamp).forEach(d => {
                    const data = d.data();
                    const el = document.createElement('div');
                    el.className = 'card p-5 flex justify-between items-center cursor-pointer';
                    el.onclick = () => window.location.hash = data.roomId;
                    el.innerHTML = `
                        <div class="flex items-center gap-4">
                            <div class="w-1.5 h-1.5 rounded-full ${data.type === 'private' ? 'bg-pink-500' : 'bg-orange-500'}"></div>
                            <div>
                                <div class="font-bold text-sm">#${data.roomId.toUpperCase()}</div>
                                <div class="text-[8px] text-white/20 font-black uppercase tracking-tighter">${data.type} ROOM</div>
                            </div>
                        </div>
                        <i data-lucide="chevron-right" size="14" class="text-white/10"></i>`;
                    container.appendChild(el);
                });
                lucide.createIcons();
            });
        };

        const cancelReply = () => {
            replyingTo = null;
            document.getElementById('reply-preview').classList.add('hidden');
        };
        document.getElementById('btn-cancel-reply').onclick = () => {
            cancelReply();
            slideContextBars();
        };

        // Identity Menu
        btnIdentity.onclick = () => {
            identityMenu.classList.toggle('hidden');
        };

        const setActiveIdentityButton = (activeBtn) => {
            [identityAnon, identityId, identityCustomBtn].forEach(btn => {
                btn.classList.remove('bg-white/10');
                btn.classList.add('bg-white/5');
            });
            activeBtn.classList.add('bg-white/10');
            activeBtn.classList.remove('bg-white/5');
        };

        identityAnon.onclick = () => {
            senderIdentity = 'anon';
            identityCustomInput.classList.add('hidden');
            setActiveIdentityButton(identityAnon);
        };

        identityId.onclick = () => {
            senderIdentity = 'id';
            identityCustomInput.classList.add('hidden');
            setActiveIdentityButton(identityId);
        };

        identityCustomBtn.onclick = () => {
            senderIdentity = 'custom';
            identityCustomInput.classList.remove('hidden');
            identityCustomInput.focus();
            setActiveIdentityButton(identityCustomBtn);
        };

        identityCustomInput.oninput = (e) => {
            customSenderName = e.target.value;
        };

        const setEdit = (m) => {
            cancelReply();
            editMessageId = m.id;
            chatInput.value = m.text;
            chatInput.focus();
            editPreview.classList.remove('hidden');
            slideContextBars();
        };

        const cancelEdit = () => {
            editMessageId = null;
            chatInput.value = '';
            editPreview.classList.add('hidden');
            slideContextBars();
        };

        btnCancelEdit.onclick = cancelEdit;

        const slideContextBars = () => {
            const bars = document.querySelectorAll('.context-bar');
            let visibleBar = null;
            bars.forEach(bar => {
                if (!bar.classList.contains('hidden')) {
                    visibleBar = bar;
                }
            });

            if (visibleBar) {
                visibleBar.style.transform = 'translateY(0)';
                chatForm.style.transform = `translateY(-${visibleBar.offsetHeight}px)`;
            } else {
                chatForm.style.transform = 'translateY(0)';
            }
        };

        // Expose functions for Playwright testing
        window.test = { setEdit, cancelEdit, cancelReply };

        const prompts = [
            "What's a secret you've never told a soul? ðŸ¤«",
            "Write a letter to someone you'll never see again. ðŸ’Œ",
            "What is the one thing you regret most this year? ðŸ˜”",
            "If you could say one thing to your past self, what would it be? ðŸ—£ï¸",
            "What does the void feel like today? ðŸŒŒ",
            "Describe your current mood using only three words. ðŸ“",
            "If this message was the last thing you ever wrote, what would it say? âœï¸",
            "What is the sound of your silence right now? ðŸŽ§",
            "Type a truth, then a lie. Let the void decide which is which. ðŸ¤”",
            "Leave a piece of advice for the next ghost who wanders in. ðŸ‘»",
            "Predict something that will happen in the next 24 hours. ðŸ”®",
            "Shout into the void: [YOUR MESSAGE HERE] ðŸ“£",
            "Click a ghost message to reveal it... but be quick. â³",
            "This room will vanish in 24 hours. Don't get attached. ðŸ’”",
            "Toggle Ghost Mode to keep your words hidden until they're ready to burn. ðŸ”¥"
        ];

        let promptInterval = null;

        const typeWriter = (text, i) => {
            if (i < text.length) {
                chatInput.placeholder = text.substring(0, i + 1);
                setTimeout(() => typeWriter(text, i + 1), 50);
            }
        };

        const startPrompts = () => {
            if (promptInterval) clearInterval(promptInterval);
            let lastPrompt = -1;
            const nextPrompt = () => {
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * prompts.length);
                } while (randomIndex === lastPrompt);
                lastPrompt = randomIndex;
                const prompt = prompts[randomIndex];
                document.getElementById('prompt-container').textContent = prompt;
                typeWriter(prompt, 0);
            };
            nextPrompt();
            promptInterval = setInterval(nextPrompt, 5000);
        };

        chatInput.addEventListener('focus', () => {
            if (promptInterval) clearInterval(promptInterval);
            document.getElementById('prompt-container').textContent = '';
            chatInput.placeholder = 'Type a message...';
        });

        // Wrap initChat to start prompts
        const originalInitChat = window.initChat;
        window.initChat = (roomId) => {
            originalInitChat(roomId);
            startPrompts();
        };


    </script>
</body>
</html>

